scoreboard players set tmp lbc.math 0
execute store result score tmp lbc.math if entity @e[type=#minecraft:mobs,distance=..10,tag=!spectator,tag=!rcdenyalways,tag=!sauvojen_tuntija]
execute if score tmp lbc.math matches 10.. at @a[gamemode=!spectator,nbt={Inventory:[{components:{"minecraft:custom_data":{upgradable:1,lightningwand:1}}}]}] if score @a[gamemode=!spectator,distance=..0.001,limit=1,nbt={Inventory:[{components:{"minecraft:custom_data":{upgradable:1,lightningwand:1}}}]}] lbcID2 = @s lbcID2 as @a[gamemode=!spectator,distance=..0.001,limit=1,nbt={Inventory:[{components:{"minecraft:custom_data":{upgradable:1,lightningwand:1}}}]}] at @s run function lbc:other/magic_academy/can_upgrade