execute if entity @e[type=#mobs,distance=..15,dx=0,dy=0,dz=0,tag=!nodamage,tag=!spectator,nbt=!{active_effects:[{id:"minecraft:blindness"}]}] at @a[gamemode=!spectator,nbt={SelectedItem:{components:{"upgradable": true,"stblind": true}}}] if score @a[distance=..0.001,limit=1,gamemode=!spectator] lbcID2 = @s lbcID2 as @a[distance=..0.001,limit=1,gamemode=!spectator] at @s if predicate lbc:chance3 run function lbc:other/magic_academy/can_upgrade